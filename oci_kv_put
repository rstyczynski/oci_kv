#!/bin/bash
# Usage: echo "value" | oci_kv_put <key>
#        oci_kv_put <key> < file
# Bucket is taken from OCI_KV_STORE env var (default: kv_store)

set -euo pipefail

bucket="${OCI_KV_STORE:-kv_store}"
key="${1:?Usage: oci_kv_put <key>}"

oci os object put --bucket-name "$bucket" --name "$key" --file -
